{"componentChunkName":"component---src-templates-blog-post-js","path":"/swr/","result":{"data":{"site":{"siteMetadata":{"title":"hmy75d blog"}},"markdownRemark":{"id":"54e82d22-3339-50cf-b118-e45f69d001fb","excerpt":"swrë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ êµ¬í˜„í•´ë³´ë©´ì„œ í•™ìŠµí•œ ë‚´ìš©ì„ ê¸€ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì€ swrë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‚¬ìš©ë²• ë³´ë‹¤ëŠ” ë‚´ë¶€ë¥¼ íŒŒì•…í•œ ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. swrë‚´ë¶€ì—ëŠ” í¬ê²Œ ì–´ë–¤ ìš”ì†Œë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆê³ , ë˜ ì–´ë–¤ íë¦„ìœ¼ë¡œ í™œìš©ë˜ëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. SWRâ€¦","html":"<p>swrë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ êµ¬í˜„í•´ë³´ë©´ì„œ í•™ìŠµí•œ ë‚´ìš©ì„ ê¸€ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì€ swrë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‚¬ìš©ë²• ë³´ë‹¤ëŠ” ë‚´ë¶€ë¥¼ íŒŒì•…í•œ ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. swrë‚´ë¶€ì—ëŠ” í¬ê²Œ ì–´ë–¤ ìš”ì†Œë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆê³ , ë˜ ì–´ë–¤ íë¦„ìœ¼ë¡œ í™œìš©ë˜ëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<h2>SWR ì£¼ìš” ìš”ì†Œë“¤</h2>\n<hr>\n<p>ì•ìœ¼ë¡œ ì„¤ëª…ë“œë¦´ ì£¼ìš” ìš”ì†Œë“¤ì˜ ì½”ë“œ ë””ë ‰í† ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">â”œâ”€â”€ _internal\nâ”‚   â””â”€â”€ utils\nâ”‚       â”œâ”€â”€ config-context.ts\nâ”‚       â”œâ”€â”€ config.ts\nâ”‚       â”œâ”€â”€ global-state.ts\nâ”‚       â”œâ”€â”€ resolve-args.ts\nâ”‚       â””â”€â”€ use-swr-config.ts\nâ”‚           ...\nâ””â”€â”€ core\n    â””â”€â”€ use-swr.ts\n\t\t\t\t...</code></pre></div>\n<p>ì „ì²´ì ìœ¼ë¡œ í¬ê²Œ <code class=\"language-text\">SWRGlobalState</code>ì™€ <code class=\"language-text\">config</code>, ê·¸ë¦¬ê³  <code class=\"language-text\">useSwr</code>ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/5c9784703cb57e551d0936bfa647ebee/a3bed/structure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.65822784810127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVR42oVT25aCMAzkC6Q0vYIiirues/uw//912ZlSFH3AhzG0kMlkEpuu63QLs8a21ev5rH8/P/p7v2ufUrkzb9+/o3knE2s1OVfIcgjaHg7aGaOXcdRT36sX2SV9IbRA9r6Qfl+vehoGPUCVQ4H77VZISRhxNp8I+QGVrQotVAUk8+wAwfuIM59D/W6fEASrOkaL6GtiIQZ4T4W+FjKfWiYySNjqEUNgay2tqKrjBrstt/CJ0WMICbiAcG3fVZCECql2STYlz7QGQ+sWkJCVQoww3muPKfKZ6yGVZIvim6BVa1S86Pw16ziNuEMXDu8sCD1+plMPZOxafEy7KIev9NZUj0sSMM0XPc+TuujVJfgdRC0KMDZeastIiILK9ukH18VuprmqyEPWOGDRbffSspCwNds9NFDpNcakAV4O9BLD8fAu5aTpmIuKRTWKR/cyEJ4bgR/rBdUSZrNKjwTuYnBFZWnPyaLYbAmhMDqDiWIwIHKy/z8tZCAukZAnWJAe/gNktz4rr0YxvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"structure\"\n        title=\"\"\n        src=\"/blog/static/5c9784703cb57e551d0936bfa647ebee/f058b/structure.png\"\n        srcset=\"/blog/static/5c9784703cb57e551d0936bfa647ebee/c26ae/structure.png 158w,\n/blog/static/5c9784703cb57e551d0936bfa647ebee/6bdcf/structure.png 315w,\n/blog/static/5c9784703cb57e551d0936bfa647ebee/f058b/structure.png 630w,\n/blog/static/5c9784703cb57e551d0936bfa647ebee/40601/structure.png 945w,\n/blog/static/5c9784703cb57e551d0936bfa647ebee/78612/structure.png 1260w,\n/blog/static/5c9784703cb57e551d0936bfa647ebee/a3bed/structure.png 1721w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>SWRGlobalState</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/4d4237460d90d6796d29681997606dfe/99072/swrGlobalState.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.62025316455697%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACGUlEQVR42m2TS3PiQAyEfQ8BP7AN+IF52RDwhsCF3DbX/P//o/16amaL2uxhauSR1Gq15ChJEvv3xP6M7+/2+Py02/1ul3F096/r1fI8t1kcW/qf3OgHEIH5fG7rxcKuu52N260du87eNhsb1ms7tK0tsswS4mb+pD8AvaMEqKZ6RUJbFFZw52lqGTFzjvx7Ctxged7v7VBVtuBNucJwgLE3mrK0FWANQWq14Hs6mznWCaCyq6axD3y/Hw/7ALSpa6spvFut/nboGKrSErDJdGpD39v315edj0eb8p0CFoLFtFsuHdMNt9i9UkhE9K7WIzGrqDLB4QL5TgFqsHNajr1GaqtF19Mw2NvlYiPnjKbyOfZgSPdIlWa+7QMtlDhSwBY4tzAP7OYwbfDtDwe73242nE7WE18QG/sZCCsSqipI/J6KK0AatGqZ5sBkM8+u8AOTthfYVYAp1wH6mDW+qPOAclQkaAA1wS+TidNmTtthAxQr9kf0LbFX2M+AGlC0g2buk5RQApLjyABWC2HJA8MlE5V+Ld1Ib72LkAo7DWW4RC009p4EMdNden3C0kpDaXvVyiCJWsz8Fmh1lB/FfmGFrgc5dWtdwoRT/wdJkjOL3TOQM+ulVcuI7fwKqUu3hy4RAIG2VC3Dymgl8KklnVdsN2kAeoa35a69PKGT6Pk/VoWghVoQuGwtvgCksfZNcqjdoH389C//AXwAZL4sVQP+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swrGlobalState.png\"\n        title=\"\"\n        src=\"/blog/static/4d4237460d90d6796d29681997606dfe/f058b/swrGlobalState.png\"\n        srcset=\"/blog/static/4d4237460d90d6796d29681997606dfe/c26ae/swrGlobalState.png 158w,\n/blog/static/4d4237460d90d6796d29681997606dfe/6bdcf/swrGlobalState.png 315w,\n/blog/static/4d4237460d90d6796d29681997606dfe/f058b/swrGlobalState.png 630w,\n/blog/static/4d4237460d90d6796d29681997606dfe/99072/swrGlobalState.png 842w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">SWRGlobalState</code>ëŠ” <code class=\"language-text\">swr</code>ì—ì„œ ê´€ë¦¬ë˜ëŠ” <code class=\"language-text\">cache</code>ë¥¼ í‚¤ë¡œ í•˜ê³ , ì „ì—­ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ìš”ì†Œë“¤ë¡œ ì´ë£¨ì–´ì§„ <code class=\"language-text\">GlobalState</code>ë¥¼ ê°’ìœ¼ë¡œ ë§µí•‘í•œ <code class=\"language-text\">WeakMap</code> ìë£Œêµ¬ì¡°ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ğŸ’¡ <code class=\"language-text\">WeakMap</code>ì´ë€?<br> <code class=\"language-text\">WeakMap</code>ì€ <code class=\"language-text\">Map</code>ê³¼ ê°™ì€ ê°ì²´ ìë£Œêµ¬ì¡°ë¡œì´ì§€ë§Œ ì°¨ì´ì ì€ í‚¤ë¡œ ì›ì‹œê°’ì´ ëŒ€ì‹  ê°ì²´ë§Œ ë°›ê²Œ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” í‚¤ë¡œ <code class=\"language-text\">Cache</code>ë¼ëŠ” ê°ì²´ë¥¼ ë°›ê²Œ ë©ë‹ˆë‹¤.\në˜í•œ <code class=\"language-text\">Map</code>ê³¼ì˜ ì°¨ì´ì ì€ í”„ë¡œê·¸ë¨ ë‚´ì— ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ê°€ <code class=\"language-text\">WeakMap</code>ì„ ì œì™¸í•˜ê³  ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ê°€ë¹„ì§€ë¡œ ìˆ˜ê±°ë˜ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤.\nê·¸ë˜ì„œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì—ì„œ ì´ì ì´ ìˆê³  <code class=\"language-text\">swr</code>ì—ì„œëŠ” ì´ëŸ¬í•œ ì´ì ì„ ì´ìš©í•˜ê¸° ìœ„í•´ <code class=\"language-text\">WeakMap</code>ì„ ì´ìš©í•œê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>\n</blockquote>\n<p>ì—¬ê¸°ì„œ <code class=\"language-text\">cache</code>ëŠ” ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  í™œìš©í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë©° í˜•íƒœëŠ” <code class=\"language-text\">useSwr</code>ì„ êµ¬ë¶„í•˜ëŠ” ê³ ìœ í•œ ì‹ë³„ì <code class=\"language-text\">key</code>ì™€, ê·¸ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„° <code class=\"language-text\">state</code>ë¥¼ ë§µí•‘í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">GlobalState</code>ëŠ” <code class=\"language-text\">swr</code>ì—ì„œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ìš”ì†Œë“¤ì˜ ì§‘í•©ì´ë©° <code class=\"language-text\">Revalidators</code>, <code class=\"language-text\">Mutations</code>, <code class=\"language-text\">Fetch</code>, <code class=\"language-text\">Preload</code>, <code class=\"language-text\">Mutator</code>, <code class=\"language-text\">Setter</code>, <code class=\"language-text\">Subscriber</code>ë“±ì„ ë°°ì—´ë¡œ ì €ì¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// global-state.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> SWRGlobalState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap<span class=\"token operator\">&lt;</span>Cache<span class=\"token punctuation\">,</span> GlobalState<span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">GlobalState</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> RevalidateCallback<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Revalidators</span>\n  Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Mutations: [ts, end_ts]</span>\n  Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Fetch: [data, ts]</span>\n  Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> FetcherResponse<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">>></span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Preload</span>\n  ScopedMutator<span class=\"token punctuation\">,</span> <span class=\"token comment\">// Mutator</span>\n  <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> prev<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Setter</span>\n  <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>current<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> prev<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span> <span class=\"token comment\">// Subscriber</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Cache<span class=\"token operator\">&lt;</span>Data <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> IterableIterator<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span>\n  <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> State<span class=\"token operator\">&lt;</span>Data<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span>\n  <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> State<span class=\"token operator\">&lt;</span>Data<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span>\n  <span class=\"token keyword\">delete</span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h3>Config</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 595px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/28fbd1720d1b4bf6baaab7665a637d77/3dd3e/config.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.632911392405056%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42m1S2XKjMBDkaR9iQAcCCXQAduIrEFdczv9/WmdGjrOu2n1odExremboQimFB6RUaJoWfT9AN4bOEs/xDLp7HQacQsgYug7iiVc8NoKTKSLPEbfPFYfdTGcBqTSBYlqjqmu8jSPeCX82G0RrsaSEihJqiueETNaEZCV2fY3BlBiaF3hT0R2hK9GaBrevL5yOR3xcLljmGWeqbqXE5kfo0U3R0GdyEs5IWFL0MWHwIaOn1nZTxOdpi3lKaNsOVVWhJFhjIISA9x636w1bEpFSoIhWwLUKL2WFkRTXdcFhv8eRqlmWd/gQ0RmNrSvzrFi07/u8F7WATT3CPsFNA1SjUSSqrqolQvAYqCIm8/p46JyjuMAhCIwpksiK6/WKaZzQBYvGNfd2SbSdLIo3L/OD7XbOVZ3PZ3q05HVd11x1zXGvc1sxxix0+bhg2s9QnYamGeuWEzoUkxPoqeVNVef5MOr6776sqC2jMBKPh89z44qYI4WEGVq0ycKENifOtnntBVng/uvvNrmDzyw2Oo6pX2sweJ/5lJShGPLHNkwInczW4fUZvpO/pv/H5P/BNzDi/TH4cO4EAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"config.png\"\n        title=\"\"\n        src=\"/blog/static/28fbd1720d1b4bf6baaab7665a637d77/3dd3e/config.png\"\n        srcset=\"/blog/static/28fbd1720d1b4bf6baaab7665a637d77/c26ae/config.png 158w,\n/blog/static/28fbd1720d1b4bf6baaab7665a637d77/6bdcf/config.png 315w,\n/blog/static/28fbd1720d1b4bf6baaab7665a637d77/3dd3e/config.png 595w\"\n        sizes=\"(max-width: 595px) 100vw, 595px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">config</code>ëŠ” <code class=\"language-text\">swr</code>ì— ì‚¬ìš©ë˜ëŠ” ì˜µì…˜ ê°’ë“¤ê³¼ <code class=\"language-text\">cache</code>ë¥¼ ë‹´ê³  ìˆìœ¼ë©° <code class=\"language-text\">useSwr</code>ì— ì œê³µí•©ë‹ˆë‹¤.</p>\n<p>ìš°ì„  <code class=\"language-text\">config</code>ì˜ êµ¬ì„±ì€ ì´ë¯¸ ì„ ì–¸ëœ <code class=\"language-text\">defaultConfig</code>ì™€ ì„ íƒì ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒìœ„ <code class=\"language-text\">SWRConfigContext</code>ì—ì„œ ìƒì†ë°›ì€ ê°’ì„ ë³‘í•©í•˜ì—¬ ìµœì¢…ì ìœ¼ë¡œ í˜•ì„±ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// config.ts</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>cache<span class=\"token punctuation\">,</span> mutate<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">initCache</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token punctuation\">[</span>Cache<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> ScopedMutator<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> defaultConfig<span class=\"token operator\">:</span> FullConfiguration <span class=\"token operator\">=</span> <span class=\"token function\">mergeObjects</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    onLoadingSlow<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n    onSuccess<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n    onError<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n    onErrorRetry<span class=\"token punctuation\">,</span>\n    onDiscarded<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n\n    revalidateOnFocus<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    revalidateOnReconnect<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    revalidateIfStale<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    shouldRetryOnError<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n    errorRetryInterval<span class=\"token operator\">:</span> slowConnection <span class=\"token operator\">?</span> <span class=\"token number\">10000</span> <span class=\"token operator\">:</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span>\n    focusThrottleInterval<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n    dedupingInterval<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n    loadingTimeout<span class=\"token operator\">:</span> slowConnection <span class=\"token operator\">?</span> <span class=\"token number\">5000</span> <span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n\n    compare<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">isPaused</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    cache<span class=\"token punctuation\">,</span> <span class=\"token comment\">//ì´ˆê¸° ìºì‹œê°’</span>\n    mutate<span class=\"token punctuation\">,</span>\n    fallback<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  preset<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì—¬ê¸°ì„œ ìƒìœ„ <code class=\"language-text\">config</code>ëŠ” <code class=\"language-text\">SWRConfig</code>(<code class=\"language-text\">SWRConfigContext.Provider</code>)ë¥¼ í†µí•´ì„œ í˜•ì„±ë˜ë©°, ì´ëŠ” í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// config-context.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> SWRConfigContext <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createContext</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Partial<span class=\"token operator\">&lt;</span>FullConfiguration<span class=\"token operator\">>></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> SWRConfig<span class=\"token operator\">:</span> <span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>\n  PropsWithChildren<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n    value<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Config <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>parentConfig<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Config<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Config<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n<span class=\"token operator\">></span> <span class=\"token operator\">=</span> props <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props\n  <span class=\"token keyword\">const</span> parentConfig <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>SWRConfigContext<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> isFunctionalConfig <span class=\"token operator\">=</span> <span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>isFunctionalConfig <span class=\"token operator\">?</span> <span class=\"token function\">value</span><span class=\"token punctuation\">(</span>parentConfig<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>isFunctionalConfig<span class=\"token punctuation\">,</span> parentConfig<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> extendedConfig <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>isFunctionalConfig <span class=\"token operator\">?</span> config <span class=\"token operator\">:</span> <span class=\"token function\">mergeConfigs</span><span class=\"token punctuation\">(</span>parentConfig<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>isFunctionalConfig<span class=\"token punctuation\">,</span> parentConfig<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n\t<span class=\"token operator\">...</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n    SWRConfigContext<span class=\"token punctuation\">.</span>Provider<span class=\"token punctuation\">,</span>\n    <span class=\"token function\">mergeObjects</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token operator\">:</span> extendedConfig\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h3>useSwr</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 610px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/fe1f92b5ce515adeb294b0341ba15915/5aae9/useSwr.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXUlEQVR42o2SzU7DMBCE8wKx1/+O47RpQlsqaC7Ahfd/r2Ft0yJVIHEY2ZHXn2dn0yml8Ku0hk2uKXuoQSOtGaftjOP1jOWywiTbzqOFGRyMM+huAM2AO4wIdmwwZRkcHJbjgumwgzAS0hLI8h1vmlxZNdwuNCAxQIgeUkp21r4LUCkNkoSYI64fW3VXAEqWR9vDTbznOssuOyKJNI54eb0ipVShRhvYyVe3tSXe9+VBrnW8NwVaQA8xGa7tJJNTdHheMqaccTydsW0bDpcFshcwwdZWigttSq6+dSGoui+qcF4NZ9mNnjAHgaAF1qHHfgyY5wVvn+/srAVdHPo1Ip5ThZvbEAbbFLiGVzdzhodBQpBGz/Ic9tPEBz7ykFS9VAptmWZ2td0qhjb5qjrA8gBH0e0jh25bHlMgjE5yXnSf9j18+dPio9R322WYndGENUmcRoHM7eu//st/6gtT6N+7m38GjgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"useSwr.png\"\n        title=\"\"\n        src=\"/blog/static/fe1f92b5ce515adeb294b0341ba15915/5aae9/useSwr.png\"\n        srcset=\"/blog/static/fe1f92b5ce515adeb294b0341ba15915/c26ae/useSwr.png 158w,\n/blog/static/fe1f92b5ce515adeb294b0341ba15915/6bdcf/useSwr.png 315w,\n/blog/static/fe1f92b5ce515adeb294b0341ba15915/5aae9/useSwr.png 610w\"\n        sizes=\"(max-width: 610px) 100vw, 610px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">useSwr</code>ì€ ì»´í¬ë„ŒíŠ¸ ì˜ì—­ì—ì„œ ì§ì ‘ ì‚¬ìš©ë˜ëŠ” <code class=\"language-text\">hook</code>ì…ë‹ˆë‹¤. ë°ì´í„°ë¥¼ íŒ¨ì¹­í•˜ê³  <code class=\"language-text\">state</code>ë¥¼ ê´€ë¦¬í•˜ë©° í•„ìš”ì— ë”°ë¼ ë°ì´í„°ë¥¼ ì¬ê²€ì¦í•©ë‹ˆë‹¤.\n<code class=\"language-text\">config</code>ì˜ <code class=\"language-text\">cache</code>ì™€ ì˜µì…˜ ê°’ì„ ì „ë‹¬ë°›ì•„ ì»´í¬ë„ŒíŠ¸ì— ì´ìš©ë  <code class=\"language-text\">state</code>ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>\n<h2>ì‹¤í–‰ ê³¼ì •</h2>\n<hr>\n<h3>ì´ˆê¸° ìºì‹œ ì „ë‹¬ê³¼ì •</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/a63bdf16802de38a2588ebc958fcec13/d38ac/flow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.75949367088608%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABfElEQVR42o2T23LCMAxE+QAgji1fcyOQgT70/39P3Q0mwzC05UHj2JbWZ+V417atvobhaIwGEf2+3fRrWXQeR7VY2/Z/id07MW+tdimtIsfDQQ/7vfal6PV00uy9Oux/JEixBCqpgtfzWbuctXSdXqZpDVIz52PCSEHnNCBou4dwB7qx73WGYKqEzDO1Bf8TQoyFLKJ9i3VaHUA7QJxrHjnmL0L7NLLwBCKKs6ip5JxPsF9i3ABeKTfBY9OosAgWEwrYK9ouICNdqvMgXnscZkFJ6yEEQOCSTBU0+HC21WkcNMYAwXw/uW3XAqmFUq0b5OY+q0TBWPRyWzRkEAvcidWdtwb9gs2SdBo69K/aQKw9ghDnj7AeB3iQd1nnZdZ+GrRhvq2CwRn1PuiIf474nCeQCqzRPu1xPaINGfSkMY1ZRx9w4+JWIVq2rgoKelR4eygksTCJFms49G6LeP8HSfq4kBdBvAyKQojinL99jk+WKUDbkv0a1t8pufcDPPong8lrXT8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flow.png\"\n        title=\"\"\n        src=\"/blog/static/a63bdf16802de38a2588ebc958fcec13/f058b/flow.png\"\n        srcset=\"/blog/static/a63bdf16802de38a2588ebc958fcec13/c26ae/flow.png 158w,\n/blog/static/a63bdf16802de38a2588ebc958fcec13/6bdcf/flow.png 315w,\n/blog/static/a63bdf16802de38a2588ebc958fcec13/f058b/flow.png 630w,\n/blog/static/a63bdf16802de38a2588ebc958fcec13/40601/flow.png 945w,\n/blog/static/a63bdf16802de38a2588ebc958fcec13/78612/flow.png 1260w,\n/blog/static/a63bdf16802de38a2588ebc958fcec13/d38ac/flow.png 1744w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\ní”„ë¡œì íŠ¸ ì´ˆê¸° ì‹¤í–‰ì‹œ <code class=\"language-text\">defaultConfig</code>ê°€ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë¬¼ë¡  ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— <code class=\"language-text\">SWRConfig</code>ë¥¼ í†µí•´ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì˜ <code class=\"language-text\">useSwr</code>ì— ì œê³µí• ìˆ˜ ìˆì§€ë§Œ <code class=\"language-text\">SWRConfig</code>ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ê°€ì •ìœ¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ë¨¼ì € <code class=\"language-text\">initCache</code>ë¥¼ í˜¸ì¶œì„ í†µí•´ ì´ˆê¸° <code class=\"language-text\">cache</code>ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ì´ˆê¸° <code class=\"language-text\">cache</code>ëŠ” ë§µ ì¸ìŠ¤í„´ìŠ¤ë¡œ <code class=\"language-text\">initCache</code>ì˜ ì¸ìë¡œ í˜¸ì¶œë©ë‹ˆë‹¤. ì¸ìë¡œ ë°›ì€ <code class=\"language-text\">provider</code>ë¥¼ <code class=\"language-text\">SWRGlobalState</code>ì— <code class=\"language-text\">GlobalState</code>ì˜ ì´ˆê¸° ê°’ìœ¼ë¡œ ë§µí•‘í•˜ì—¬ í˜•ì„± í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// cache.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> initCache <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Data <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  provider<span class=\"token operator\">:</span> Cache<span class=\"token operator\">&lt;</span>Data<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span>ProviderConfiguration<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n  <span class=\"token operator\">|</span> <span class=\"token punctuation\">[</span>Cache<span class=\"token operator\">&lt;</span>Data<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> ScopedMutator<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">]</span>\n  <span class=\"token operator\">|</span> <span class=\"token punctuation\">[</span>Cache<span class=\"token operator\">&lt;</span>Data<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> ScopedMutator<span class=\"token punctuation\">]</span>\n  <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>SWRGlobalState<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>provider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> opts <span class=\"token operator\">=</span> <span class=\"token function\">mergeObjects</span><span class=\"token punctuation\">(</span>defaultConfigOptions<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">EVENT_REVALIDATORS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> mutate <span class=\"token operator\">=</span> <span class=\"token function\">internalMutate</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token constant\">UNDEFINED</span><span class=\"token punctuation\">,</span> provider<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> ScopedMutator\n    <span class=\"token keyword\">let</span> unmount <span class=\"token operator\">=</span> noop\n\n    <span class=\"token keyword\">const</span> subscriptions<span class=\"token operator\">:</span> Record<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>current<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> prev<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n      <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">subscribe</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n      key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>current<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> prev<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> subs <span class=\"token operator\">=</span> subscriptions<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n      subscriptions<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> subs\n\n      subs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> subs<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>subs<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> prev<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      provider<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> subs <span class=\"token operator\">=</span> subscriptions<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>subs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> fn <span class=\"token keyword\">of</span> subs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> prev<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">initProvider</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>SWRGlobalState<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>provider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t    <span class=\"token comment\">// SWRGlbalStateì— provider(Cache)ë¥¼ í‚¤ë¡œ,</span>\n\t\t\t\t<span class=\"token comment\">// ë°°ì—´ì— ê°’ë“¤(GlobalState)ë“¤ì´ ë°¸ë¥˜ë¡œ ë§µí•‘ë©ë‹ˆë‹¤.</span>\n        SWRGlobalState<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>provider<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n\t\t\t\t\t<span class=\"token comment\">// ë°°ì—´ì—ëŠ” GlobalStateê°’ì¸ Revalidators, Mutations,</span>\n\t\t\t\t\t<span class=\"token comment\">// Fetch, Preload, Mutator, Setter, Subscriber ë“±ì´ ì €ì¥ë©ë‹ˆë‹¤.</span>\n          <span class=\"token constant\">EVENT_REVALIDATORS</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          mutate<span class=\"token punctuation\">,</span>\n          setter<span class=\"token punctuation\">,</span>\n          subscribe\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n\t\t\t\t<span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">initProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token comment\">// SWRGLobalStateê°€ ë§µí•‘ëœ í›„ Cacheê°’ì¸ providerë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>provider<span class=\"token punctuation\">,</span> mutate<span class=\"token punctuation\">,</span> initProvider<span class=\"token punctuation\">,</span> unmount<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n\t<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ <code class=\"language-text\">cache</code>ì™€ ì˜µì…˜ìœ¼ë¡œ <code class=\"language-text\">defaultConfig</code>ê°€ ì„ ì–¸ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">\n<span class=\"token comment\">// config.ts</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>cache<span class=\"token punctuation\">,</span> mutate<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">initCache</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token punctuation\">[</span>Cache<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> ScopedMutator<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> cache<span class=\"token punctuation\">,</span> mutate<span class=\"token punctuation\">,</span> compare <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ê¸°ë³¸ ì„¤ì •</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> defaultConfig<span class=\"token operator\">:</span> FullConfiguration <span class=\"token operator\">=</span> <span class=\"token function\">mergeObjects</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span>\n    onLoadingSlow<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n    onSuccess<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n    onError<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n    onErrorRetry<span class=\"token punctuation\">,</span>\n    onDiscarded<span class=\"token operator\">:</span> noop<span class=\"token punctuation\">,</span>\n\n    revalidateOnFocus<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    revalidateOnReconnect<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    revalidateIfStale<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    shouldRetryOnError<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n    errorRetryInterval<span class=\"token operator\">:</span> slowConnection <span class=\"token operator\">?</span> <span class=\"token number\">10000</span> <span class=\"token operator\">:</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span>\n    focusThrottleInterval<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n    dedupingInterval<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n    loadingTimeout<span class=\"token operator\">:</span> slowConnection <span class=\"token operator\">?</span> <span class=\"token number\">5000</span> <span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n\n    compare<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">isPaused</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token comment\">// ì—¬ê¸°ì— cacheê°€ ì „ë‹¬ë©ë‹ˆë‹¤.</span>\n    cache<span class=\"token punctuation\">,</span>\n    mutate<span class=\"token punctuation\">,</span>\n    fallback<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>ì´ˆê¸°ì— ìƒìœ„ <code class=\"language-text\">config</code>ê°€ ì—†ê¸° ë•Œë¬¸ì— <code class=\"language-text\">defaultConfig</code>ë§Œ <code class=\"language-text\">useSwrConfig</code>ë¥¼ í†µí•´ì„œ ë°˜í™˜ë˜ê³  ì´ <code class=\"language-text\">useSwrConfig</code>ê°€ <code class=\"language-text\">withArgs</code>ë¥¼ í†µí•´ì„œ <code class=\"language-text\">fallbackConfig</code>ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// use-swr-config.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useSWRConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> FullConfiguration <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">mergeObjects</span><span class=\"token punctuation\">(</span>defaultConfig<span class=\"token punctuation\">,</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>SWRConfigContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// resolve-args.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> withArgs <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SWRType</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(hook: any) => </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useSWRArgs</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fallbackConfig <span class=\"token operator\">=</span> <span class=\"token function\">useSWRConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">,</span> _config<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">normalize</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">mergeConfigs</span><span class=\"token punctuation\">(</span>fallbackConfig<span class=\"token punctuation\">,</span> _config<span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token operator\">...</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token function\">hook</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> fn <span class=\"token operator\">||</span> config<span class=\"token punctuation\">.</span>fetcher <span class=\"token operator\">||</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">unknown</span> <span class=\"token keyword\">as</span> SWRType\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span></code></pre></div>\n<p><code class=\"language-text\">config</code>ë¥¼ ê°€ì§€ê³  ìˆëŠ” <code class=\"language-text\">withArgs</code>ëŠ” <code class=\"language-text\">useSwrHandler</code>ë¥¼ ì¸ìë¡œ í˜¸ì¶œí•˜ì—¬ <code class=\"language-text\">useSwr</code>ë¡œ ì„ ì–¸í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ í˜•íƒœë¡œ <code class=\"language-text\">withArgs</code>ë¥¼ í†µí•´ <code class=\"language-text\">config</code>ë¥¼ ìµœì¢…ì ìœ¼ë¡œ <code class=\"language-text\">useSwrHandler</code>ì— ì „ë‹¬í•˜ë©° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// use-swr.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useSWRHandler <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Data <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> Error <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  _key<span class=\"token operator\">:</span> Key<span class=\"token punctuation\">,</span>\n  fetcher<span class=\"token operator\">:</span> Fetcher<span class=\"token operator\">&lt;</span>Data<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  config<span class=\"token operator\">:</span> FullConfiguration <span class=\"token operator\">&amp;</span> SWRConfiguration<span class=\"token operator\">&lt;</span>Data<span class=\"token punctuation\">,</span> Error<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    cache<span class=\"token punctuation\">,</span>\n\t  <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> config<span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">const</span> useSWR <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">withArgs</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SWRHook<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>useSWRHandler<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> useSWR</code></pre></div>\n<p><code class=\"language-text\">useSwrHandler</code>ëŠ” <code class=\"language-text\">useSwr</code>ì˜ ì‹œì‘ì ìœ¼ë¡œ <code class=\"language-text\">useSwr</code>ì˜ ë‚´ë¶€ë¥¼ í•¸ë“¤ë§í•˜ëŠ” ê¸°ë³¸ í•¨ìˆ˜ì…ë‹ˆë‹¤.</p>\n<p>ì•ì„œ ê³¼ì •ì„ í†µí•´ <code class=\"language-text\">cache</code>ê°€ ë‹´ê¸´ <code class=\"language-text\">config</code>ê°€ <code class=\"language-text\">useSwrHandler</code>ì— ì „ë‹¬ë©ë‹ˆë‹¤.</p>\n<p>ì „ë‹¬ë°›ì€ <code class=\"language-text\">cache</code>ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ í™œìš©í•˜ëŠ” ë‚´ë¶€ ìƒíƒœê°€ ì•„ë‹Œ ì™¸ë¶€ìŠ¤í† ì–´ë¡œì„œ <code class=\"language-text\">useSyncExternalStore</code>ë¥¼ í†µí•´ ë¦¬ì•¡íŠ¸ì— ë°˜ì˜í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ìš©ë  <code class=\"language-text\">state</code>ë¥¼ ë™ê¸°í™” í•©ë‹ˆë‹¤.</p>\n<p>ì—¬ê¸°ì„œ <code class=\"language-text\">useSyncExternalStore</code>ëŠ” ë¦¬ì•¡íŠ¸ ë‚´ë¶€ ìƒíƒœê°€ ì•„ë‹Œ ì™¸ë¶€ ìŠ¤í† ì–´ë¥¼ êµ¬ë…í•˜ê³ , ì´ë¥¼ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ì™€ ë™ê¸°í™”í•˜ëŠ”ë° ë„ì™€ì£¼ëŠ” ë¦¬ì•¡íŠ¸ í›…ì…ë‹ˆë‹¤.</p>\n<p>ì´ë•Œ <code class=\"language-text\">useSyncExternalStore</code>ì—ëŠ” ì²« ë²ˆì§¸ ì¸ìë¡œ ì™¸ë¶€ ìƒíƒœê°’ì„ êµ¬ë…í•˜ëŠ” í•¨ìˆ˜, ê·¸ë¦¬ê³  ë‘ ë²ˆì§¸ ì¸ìë¡œ ì»´í¬ë„ŒíŠ¸ì— ì´ìš©ë  ì™¸ë¶€ ìŠ¤í† ì–´ì˜ ìŠ¤ëƒ…ìƒ·ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<p>ì½”ë“œì—ì„œëŠ” êµ¬ë…í•¨ìˆ˜ë¡œëŠ” <code class=\"language-text\">GlobalState</code>ì˜ <code class=\"language-text\">subscribeCache</code>, ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œëŠ” <code class=\"language-text\">getSnapshot</code>ì´ ì´ìš©ë©ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">getSnapshot</code>ì€ <code class=\"language-text\">cache</code>ì— ëŒ€í•œ ìŠ¤ëƒ…ìƒ·ì´ë©°, ìŠ¤ëƒ…ìƒ·ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ë¦¬ë Œë”ë§ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤. ë˜ <code class=\"language-text\">subscribeCache</code>ëŠ” êµ¬ë…í•¨ìˆ˜ë¡œì„œ, <code class=\"language-text\">isEqual</code>ì„ í†µí•´ì„œ <code class=\"language-text\">cache</code>ì˜ ë³€í™”ê°€ ìƒê¸°ë©´ <code class=\"language-text\">callback</code>ì„ í˜¸ì¶œí•˜ì—¬ ë¦¬ë Œë”ë§ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì™¸ë¶€ë°ì´í„° <code class=\"language-text\">cache</code>ì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì— ë°˜ì˜í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// use-swr.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useSWRHandler <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>Data <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> Error <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n  _key<span class=\"token operator\">:</span> Key<span class=\"token punctuation\">,</span>\n  fetcher<span class=\"token operator\">:</span> Fetcher<span class=\"token operator\">&lt;</span>Data<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  config<span class=\"token operator\">:</span> FullConfiguration <span class=\"token operator\">&amp;</span> SWRConfiguration<span class=\"token operator\">&lt;</span>Data<span class=\"token punctuation\">,</span> Error<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    cache<span class=\"token punctuation\">,</span>\n\t  <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> config<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> fnArg<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span>_key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>getCache<span class=\"token punctuation\">,</span> setCache<span class=\"token punctuation\">,</span> subscribeCache<span class=\"token punctuation\">,</span> getInitialCache<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span>\n\t  <span class=\"token generic-function\"><span class=\"token function\">createCacheHelper</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>\n      Data<span class=\"token punctuation\">,</span>\n      State<span class=\"token operator\">&lt;</span>Data<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span>\n        _k<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Key\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>cache<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token operator\">...</span>\n\n\t<span class=\"token keyword\">const</span> getSnapshot <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token operator\">...</span>\n\t\t<span class=\"token keyword\">const</span> cachedData <span class=\"token operator\">=</span> <span class=\"token function\">getCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">const</span> clientSnapshot <span class=\"token operator\">=</span> <span class=\"token function\">getSelectedCache</span><span class=\"token punctuation\">(</span>cachedData<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> serverSnapshot <span class=\"token operator\">=</span>\n      cachedData <span class=\"token operator\">===</span> initialData\n        <span class=\"token operator\">?</span> clientSnapshot\n        <span class=\"token operator\">:</span> <span class=\"token function\">getSelectedCache</span><span class=\"token punctuation\">(</span>initialData<span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token operator\">...</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n\t\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> clientSnapshot<span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> serverSnapshot\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>cache<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> cached <span class=\"token operator\">=</span> <span class=\"token function\">useSyncExternalStore</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token function-variable function\">callback</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token function\">subscribeCache</span><span class=\"token punctuation\">(</span>\n          key<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">(</span>current<span class=\"token operator\">:</span> State<span class=\"token operator\">&lt;</span>Data<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> prev<span class=\"token operator\">:</span> State<span class=\"token operator\">&lt;</span>Data<span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isEqual</span><span class=\"token punctuation\">(</span>prev<span class=\"token punctuation\">,</span> current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// eslint-disable-next-line react-hooks/exhaustive-deps</span>\n      <span class=\"token punctuation\">[</span>cache<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    getSnapshot<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    getSnapshot<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n\t<span class=\"token keyword\">const</span> cachedData <span class=\"token operator\">=</span> cached<span class=\"token punctuation\">.</span>data\n\n\t<span class=\"token keyword\">const</span> returnedData <span class=\"token operator\">=</span> keepPreviousData\n    <span class=\"token operator\">?</span> <span class=\"token function\">isUndefined</span><span class=\"token punctuation\">(</span>cachedData<span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">?</span> laggyDataRef<span class=\"token punctuation\">.</span>current\n      <span class=\"token operator\">:</span> cachedData\n    <span class=\"token operator\">:</span> data\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    mutate<span class=\"token operator\">:</span> boundMutate<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">get</span> <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> returnedData\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> SWRResponse<span class=\"token operator\">&lt;</span>Data<span class=\"token punctuation\">,</span> Error<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> useSWR <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">withArgs</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>SWRHook<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>useSWRHandler<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> useSWR</code></pre></div>\n<h3>ìƒìœ„ Config ì „ë‹¬ê³¼ì •</h3>\n<p>ë§Œì•½ ìƒìœ„ì— <code class=\"language-text\">SWRConfig</code>ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´ ì „ì—­ì ìœ¼ë¡œ <code class=\"language-text\">config</code>ë¥¼ ì œê³µí• ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ìƒìœ„ <code class=\"language-text\">context</code>ë¥¼ í†µí•´ ì „ë‹¬ë°›ì€ <code class=\"language-text\">SwrConfigContext</code>ë¥¼ <code class=\"language-text\">useSwrConfig</code>ì—ì„œ <code class=\"language-text\">SwrConfigContext</code>ë¥¼ ìš°ì„ ìˆœìœ„ë¡œ <code class=\"language-text\">defaultConfig</code>ì™€ ë³‘í•©í•©ë‹ˆë‹¤. ìƒˆë¡œ ë³‘í•©ëœ <code class=\"language-text\">config</code>ëŠ” ì´ì „ì— ì„¤ëª…í•œ ë°©ì‹ê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ <code class=\"language-text\">withArgs</code>ë¥¼ í†µí•´ ìµœì¢…ì ìœ¼ë¡œ <code class=\"language-text\">useSwr</code>ì— ì „ë‹¬ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// use-swr-config.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useSWRConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> FullConfiguration <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">mergeObjects</span><span class=\"token punctuation\">(</span>defaultConfig<span class=\"token punctuation\">,</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>SWRConfigContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì¶”ê°€ë¡œ <code class=\"language-text\">SWRConfig</code>ë‚´ë¶€ ë¡œì§ ì¤‘ <code class=\"language-text\">SWRConfigContext</code>, <code class=\"language-text\">extendedConfig</code>ë¥¼ í†µí•´ì„œ <code class=\"language-text\">SWRConfig</code>ì˜ ì¤‘ì²©ì„ í†µí•œ <code class=\"language-text\">config</code>ì „ë‹¬ë„ ê°€ëŠ¥í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// config-context.ts</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> SWRConfigContext <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createContext</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Partial<span class=\"token operator\">&lt;</span>FullConfiguration<span class=\"token operator\">>></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> SWRConfig<span class=\"token operator\">:</span> <span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>\n  PropsWithChildren<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n    value<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Config <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>parentConfig<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Config<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Config<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n<span class=\"token operator\">></span> <span class=\"token operator\">=</span> props <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props\n  <span class=\"token keyword\">const</span> parentConfig <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>SWRConfigContext<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> isFunctionalConfig <span class=\"token operator\">=</span> <span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>isFunctionalConfig <span class=\"token operator\">?</span> <span class=\"token function\">value</span><span class=\"token punctuation\">(</span>parentConfig<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>isFunctionalConfig<span class=\"token punctuation\">,</span> parentConfig<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> extendedConfig <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>isFunctionalConfig <span class=\"token operator\">?</span> config <span class=\"token operator\">:</span> <span class=\"token function\">mergeConfigs</span><span class=\"token punctuation\">(</span>parentConfig<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>isFunctionalConfig<span class=\"token punctuation\">,</span> parentConfig<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n\n\t<span class=\"token operator\">...</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n    SWRConfigContext<span class=\"token punctuation\">.</span>Provider<span class=\"token punctuation\">,</span>\n    <span class=\"token function\">mergeObjects</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token operator\">:</span> extendedConfig\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2>ë§ˆì¹˜ë©°</h2>\n<p>ìµœê·¼ì— swr ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ íŒŒì•…í•´ë³´ê³ ì ì§ì ‘ ê¸°ë³¸ì ì¸êµ¬ì¡°ë§Œ êµ¬í˜„í•´ë´¤ê³ , ì´ë¥¼ í† ëŒ€ë¡œ í•™ìŠµí•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë´¤ìŠµë‹ˆë‹¤.</p>\n<p>ë³´í†µ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì ìš©í•˜ê³  ë‚´ë¶€ ê°œë…ì„ í•™ìŠµí•˜ëŠ”ë°ì„œ ëë‚¬ëŠ”ë°, ì´ë²ˆ ê¸°íšŒì— ë‚´ë¶€ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ë©´ì„œ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ê°œë°œí•˜ëŠ”ì§€ë„ ì¡°ê¸ˆì€ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ê³¼ì •ìì²´ëŠ” êµ‰ì¥íˆ í˜ë“¤ê³  ì˜¤ë˜ê±¸ë ¸ì§€ë§Œ ê·¸ë§Œí¼ ë” ë§ì€ ê²ƒ ì„ ë°°ìš¸ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>","frontmatter":{"title":"swr ë‚´ë¶€ë¶„ì„","date":"March 11, 2024","description":"swrë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ êµ¬í˜„í•´ë³´ë©´ì„œ í•™ìŠµí•œ ë‚´ìš©ì„ ê¸€ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì€ swrë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‚¬ìš©ë²• ë³´ë‹¤ëŠ” ë‚´ë¶€ë¥¼ íŒŒì•…í•œ ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. swrë‚´ë¶€ì—ëŠ” í¬ê²Œ ì–´ë–¤ ìš”ì†Œë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìˆê³ , ë˜ ì–´ë–¤ íë¦„ìœ¼ë¡œ í™œìš©ë˜ëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤."}},"previous":null,"next":null},"pageContext":{"id":"54e82d22-3339-50cf-b118-e45f69d001fb","previousPostId":null,"nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}