---
title: javascript 변수와 상수
date: '2024-03-11T08:16:40.250109Z'
# description: ''
---

# 메모리 데이터

## 변수 할당 과정

# 기본형 데이터와 참조형 데이터

## 불변성

앞서 말한 자바스크립트 메모리 영역 관점에서, 변수와 상수를 구분하는 변경 가능성의 대상은 변수 영역 메모리 이고, 불변성 여부를 구분할 때의 변경 가능성의 대상은 데이터 영역 메모리 입니다.
왜냐면 변수에 새로운 데이터를 할당할 때 데이터 자체를 변경하지 않고 새로 만드는 동작을 통해서만 할당하기 때문에 불변합니다.

## 가변값

기본형 데이터와 마찬가지로 참조형 데이터도 불변합니다. 다만 참조형 데이터는 프로퍼티의 변수를 할당하는 과정에서 차이점을 보입니다.

### 참조형 데이터 할당과정

```
var obj1 = {
  a: '1',
  b: 'bbb
}
```

위와 같이 obj1을 선언하여 객체를 할당한다고 할때 과정은 아래와 같습니다.

- 먼저 변수 영역에 메모리공간을 확보하고 obj1이라는 식별자로 이름을 지정합니다.
- 데이터 영역에 obj1의 값을 넣는데, 이때 그릅형 데이터로 프로퍼티의 변수 영역 메모리 주소값을 넣는다.
- 이 프로퍼티의 변수 영역 메모리의 각 식별자 이름 'a', 'b'를 지정한다
- 데이터 영역에서 각 프로퍼티의 데이터를 검색하고 없다면 새로 메모리를 확보하고 값을 지정한뒤 각 메모리의 주소값을 프로퍼티 변수 영역에 저장한다.

기본형과의 차이는 객체 프로퍼티의 변수영역이 별도로 존재한다는 점입니다.

- 프로퍼티 재할당
  객체의 프로퍼티에 값을 재할당하게 되면 데이터 자체는 불변으로 변하지 않으며 단지 프로퍼티 변수 데이터가 가리키는 값이 바뀌어 2를 재할당하게 됩니다.

중첩된 참조형 데이터 할당

```
var obj = {
  x: 3,
  arr: [3, 4, 5]
};
```

- 변수영역에 빈공간을 확보하고 obj로 이름을 지정합니다.
- 그룹형 데이터로 데이터 영역에 프로퍼티의 변수 영역 메모리를 확보하여 만들고, 데이터 영역에 주소값을 저장합니다.
- 프로퍼티 변수영역에 이릅값을 x, arr로 지정합니다.
- 먼저 x의 경우 3의 데이터값을 겁색하고 없다면 데이터 영역에 메모리를 확보하여 3을 저장후 주소값을 x의 데이터에 저장합니다.
- arr의 경우 그룹형이므로 새로운 프로퍼티 변수영역을 만듭니다.
- 각 프로퍼티 변수영역에 데이터 값이 있다면 해당 데이터 주소값을 저장하고, 없다면 새로 확보하여 값을 저장후에 주소값을 변수영역에 저장합니다.

## 변수 복사

```
var a = 10;
var b = a;

var obj1 = { c: 10, d: 'ddd' };
var obj2 = obj1;

b = 15;
obj2.c = 20;
```

위 변수 a, b, obj1, obj2모두 위에 설명한 과정과 같게 데이터가 할당됩니다. 단순 변수 복사과정에서는 b, obj2모두 각 a, obj1의 주소값을 저장하여 데이터가 복사됩니다.
차이점은 복사이후 변경했을때 기본형의 경우 바라보는 주소값이 달라지며, 참조형데이터 obj2의 경우는 여전히 obj1의 데이터 값 즉 같은 객체를 바라봅니다. 따라서 obj2.c를 변경하면 같은 객체를 바라보지만 obj1의 c속성도 같이 변경되게 됩니다.

반면 내부 프로퍼티 변경이 아닌 객체 자체를 변경한 경우는 다르게 진행됩니다.

```
var obj1 = { c: 10, d: 'ddd' };
var obj2 = obj1;
obj2 = { c: 20, d: 'ddd' };
```

여기서 obj2에 새로운 객체를 할당하기 때문에 기존처럼 같은 데이터가 아닌 새로운 데이터를 참조합니다.
그리고 새로운 객체는 새로운 프로퍼티 변수데이터를 생성합니다. 따라서 기존에 c프로퍼티와 다른 메모리공간의 데이터입니다. 그래서 차이점은 obj1과 다른 객체를 바라보며 obj1의 c프로퍼티 값은 10을 유지하게 됩니다.

따라서 중요한점은 참조형 데이터의 가변성은 객체 데이터 자체를 변경할 때가 아니라 객체 데이터의 프로퍼티를 변경할때만 성립합니다.

# 불변 객체

# 호이스팅

```

```
